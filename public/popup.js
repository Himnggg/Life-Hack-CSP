"use strict";(()=>{var o=class{constructor(){this.settings={enabled:!1,selectedCountry:"US",selectedBrowser:"chrome",overrideTimezone:!0,overrideLanguage:!0,overrideUserAgent:!0,overrideGeolocation:!0,clearCookies:!1,clearCache:!1};this.profiles={};this.elements={};this.initializeElements(),this.loadData(),this.setupEventListeners()}initializeElements(){this.elements={enableToggle:document.getElementById("enableToggle"),countryButton:document.getElementById("countryButton"),countryDropdown:document.getElementById("countryDropdown"),selectedFlag:document.getElementById("selectedFlag"),selectedCountry:document.getElementById("selectedCountry"),applyBtn:document.getElementById("applyBtn"),clearDataBtn:document.getElementById("clearDataBtn"),status:document.getElementById("status")}}async loadData(){try{let e=await chrome.runtime.sendMessage({type:"GET_SETTINGS"});e?.settings&&(this.settings=e.settings);let t=await chrome.runtime.sendMessage({type:"GET_PROFILES"});t?.profiles&&(this.profiles=t.profiles),this.updateUI(),this.populateCountryDropdown()}catch(e){console.error("Failed to load data:",e)}}setupEventListeners(){this.elements.enableToggle.addEventListener("click",()=>{this.settings.enabled=!this.settings.enabled,this.updateToggle(),this.updateStatus()}),this.elements.countryButton.addEventListener("click",()=>{this.toggleCountryDropdown()}),document.addEventListener("click",e=>{!this.elements.countryButton.contains(e.target)&&!this.elements.countryDropdown.contains(e.target)&&this.closeCountryDropdown()}),document.querySelectorAll(".browser-option").forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll(".browser-option").forEach(t=>t.classList.remove("active")),e.classList.add("active"),this.settings.selectedBrowser=e.getAttribute("data-browser")})}),document.querySelectorAll(".checkbox").forEach(e=>{e.addEventListener("click",()=>{let t=e.getAttribute("data-option");t&&(this.settings[t]=!e.classList.contains("checked"),e.classList.toggle("checked"))})}),this.elements.applyBtn.addEventListener("click",()=>{this.applySettings()}),this.elements.clearDataBtn.addEventListener("click",()=>{this.clearBrowserData()})}populateCountryDropdown(){let e=this.elements.countryDropdown;e.innerHTML="",Object.values(this.profiles).forEach(t=>{let s=document.createElement("div");s.className="dropdown-item",s.innerHTML=`
        <span class="country-flag">${t.flag}</span>
        <span>${t.name}</span>
      `,s.addEventListener("click",()=>{this.selectCountry(t.code),this.closeCountryDropdown()}),e.appendChild(s)})}selectCountry(e){this.settings.selectedCountry=e;let t=this.profiles[e];t&&(this.elements.selectedFlag.textContent=t.flag,this.elements.selectedCountry.textContent=t.name)}toggleCountryDropdown(){this.elements.countryDropdown.classList.toggle("active")}closeCountryDropdown(){this.elements.countryDropdown.classList.remove("active")}updateUI(){this.updateToggle(),this.updateStatus(),this.updateCountrySelection(),this.updateBrowserSelection(),this.updateCheckboxes()}updateToggle(){this.elements.enableToggle.classList.toggle("active",this.settings.enabled)}updateStatus(){let e=this.elements.status;this.settings.enabled?(e.className="status active",e.textContent=`Spoofing ${this.profiles[this.settings.selectedCountry]?.name||"Unknown"}`):(e.className="status inactive",e.textContent="Spoofing Disabled")}updateCountrySelection(){let e=this.profiles[this.settings.selectedCountry];e&&(this.elements.selectedFlag.textContent=e.flag,this.elements.selectedCountry.textContent=e.name)}updateBrowserSelection(){document.querySelectorAll(".browser-option").forEach(e=>{e.classList.toggle("active",e.getAttribute("data-browser")===this.settings.selectedBrowser)})}updateCheckboxes(){document.querySelectorAll(".checkbox").forEach(e=>{let t=e.getAttribute("data-option");t&&typeof this.settings[t]=="boolean"&&e.classList.toggle("checked",this.settings[t])})}async applySettings(){try{this.elements.applyBtn.textContent="Applying...",this.elements.applyBtn.setAttribute("disabled","true"),(await chrome.runtime.sendMessage({type:"UPDATE_SETTINGS",settings:this.settings}))?.success?(this.showSuccess("Settings applied successfully!"),this.updateStatus()):this.showError("Failed to apply settings")}catch(e){console.error("Failed to apply settings:",e),this.showError("Failed to apply settings")}finally{this.elements.applyBtn.textContent="Apply Settings",this.elements.applyBtn.removeAttribute("disabled")}}async clearBrowserData(){try{this.elements.clearDataBtn.textContent="Clearing...",this.elements.clearDataBtn.setAttribute("disabled","true"),(await chrome.runtime.sendMessage({type:"CLEAR_DATA"}))?.success?this.showSuccess("Browser data cleared!"):this.showError("Failed to clear data")}catch(e){console.error("Failed to clear data:",e),this.showError("Failed to clear data")}finally{this.elements.clearDataBtn.textContent="Clear Data",this.elements.clearDataBtn.removeAttribute("disabled")}}showSuccess(e){let t=this.elements.status,s=t.className,n=t.textContent;t.className="status active",t.textContent=e,setTimeout(()=>{t.className=s,t.textContent=n},2e3)}showError(e){let t=this.elements.status,s=t.className,n=t.textContent;t.className="status inactive",t.textContent=e,setTimeout(()=>{t.className=s,t.textContent=n},2e3)}};document.addEventListener("DOMContentLoaded",()=>{new o});})();
